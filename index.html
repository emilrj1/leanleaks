<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lean Leaks</title>

  <link rel="stylesheet" href="style.css"/>

  <script>
    /* =====================================================
       LEAN LEAKS ‚Äì CORE DATA
    ===================================================== */
    const scripts = [
      {
        id: "jg-garage",
        title: "JG Advanced Garages",
        category: "GARAGE",
        author: "Lean Lars",
        updated: "03-01-2026",
        video: "https://www.youtube.com/embed/9dU7TvwwviY",
        description: "Advanced garage system with modern UI, shared garages, vehicle previews and deep configuration.",
        features: [
          "Multi garage support",
          "Vehicle preview UI",
          "Shared & private garages",
          "Optimized performance"
        ],
        download: "https://www.mediafire.com/file/nl6y5uvmbxczi1f/jg-advancedgarages.rar/file"
      },
      {
        id: "jg-mechanic",
        title: "JG Mechanic",
        category: "MECHANIC",
        author: "Lean Lars",
        updated: "03-01-2026",
        video: "https://www.youtube.com/embed/Zvxozmq3huc",
        description: "High-performance mechanic script with fast UI, modern workflow and low resource usage.",
        features: [
          "Fast UI",
          "Easy configuration",
          "Low resource usage",
          "Advanced repair system"
        ],
        download: "https://www.mediafire.com/file/3kwqc7z2t03i8fg/jg-mechanic.rar/file"
      },
      {
        id: "prism-hud",
        title: "Prism HUD",
        category: "HUD",
        author: "Lean Lars",
        updated: "03-01-2026",
        video: "https://www.youtube.com/embed/4S9GKnZlCOM",
        description: "Modern FiveM HUD with clean design, smooth animations and extreme performance.",
        features: [
          "Animated UI",
          "Customizable layout",
          "Performance optimized",
          "Minimal design"
        ],
        download: "https://www.mediafire.com/file/xjbd50569yjgqbe/prism_hud.zip/file"
      }
    ];

    /* =====================================================
       STATE
    ===================================================== */
    let currentFilter = "ALL";
    let searchQuery = "";

    /* =====================================================
       UTILITIES
    ===================================================== */
    function qs(id) {
      return document.getElementById(id);
    }

    function getViews(id) {
      return Number(localStorage.getItem("views_" + id)) || 0;
    }

    function addView(id) {
      const v = getViews(id) + 1;
      localStorage.setItem("views_" + id, v);
      return v;
    }

    function isFavorite(id) {
      const favs = JSON.parse(localStorage.getItem("favorites") || "[]");
      return favs.includes(id);
    }

    function toggleFavorite(id) {
      let favs = JSON.parse(localStorage.getItem("favorites") || "[]");
      if (favs.includes(id)) {
        favs = favs.filter(f => f !== id);
      } else {
        favs.push(id);
      }
      localStorage.setItem("favorites", JSON.stringify(favs));
      renderList();
    }

    /* =====================================================
       RENDER LIST
    ===================================================== */
    function renderList() {
      const grid = qs("leak-grid");
      grid.innerHTML = "";

      const filtered = scripts.filter(s => {
        const matchCategory = currentFilter === "ALL" || s.category === currentFilter;
        const matchSearch = s.title.toLowerCase().includes(searchQuery.toLowerCase());
        return matchCategory && matchSearch;
      });

      filtered.forEach(s => {
        grid.innerHTML += `
          <div class="leak-card" onclick="openDetail('${s.id}')">
            <iframe class="leak-preview" src="${s.video}" allowfullscreen></iframe>
            <div class="leak-content">
              <span class="tag">${s.category}</span>
              <h3>${s.title}</h3>
              <p class="meta">
                Updated ${s.updated} ‚Ä¢ ${s.author}<br>
                üëÅ ${getViews(s.id)} views
              </p>
              <div style="display:flex; gap:10px; align-items:center">
                <span class="download-btn">View Details</span>
                <span onclick="event.stopPropagation(); toggleFavorite('${s.id}')">
                  ${isFavorite(s.id) ? "‚≠ê" : "‚òÜ"}
                </span>
              </div>
            </div>
          </div>
        `;
      });
    }

    /* =====================================================
       DETAIL VIEW
    ===================================================== */
    function openDetail(id) {
      const s = scripts.find(x => x.id === id);
      if (!s) return;

      addView(id);
      location.hash = id;

      qs("list-page").style.display = "none";
      const d = qs("detail-page");
      d.style.display = "block";

      d.innerHTML = `
        <button class="download-btn" onclick="goHome()">‚Üê Back</button>

        <h2>${s.title}</h2>
        <p class="meta">${s.category} ‚Ä¢ Updated ${s.updated} ‚Ä¢ ${s.author}</p>

        <iframe class="leak-preview" src="${s.video}" allowfullscreen></iframe>

        <p class="description">${s.description}</p>

        <ul class="features">
          ${s.features.map(f => `<li>‚Ä¢ ${f}</li>`).join("")}
        </ul>

        <div style="display:flex; gap:20px; flex-wrap:wrap">
          <a class="download-btn" href="${s.download}" target="_blank">‚¨á Download</a>
          <button class="download-btn" onclick="toggleFavorite('${s.id}')">
            ${isFavorite(s.id) ? "Remove Favorite" : "Add to Favorites"}
          </button>
        </div>
      `;

      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    /* =====================================================
       NAVIGATION
    ===================================================== */
    function goHome() {
      location.hash = "";
      qs("detail-page").style.display = "none";
      qs("list-page").style.display = "block";
      renderList();
    }

    window.onhashchange = () => {
      const id = location.hash.replace("#", "");
      if (id) openDetail(id);
      else goHome();
    };

    /* =====================================================
       INIT
    ===================================================== */
    window.onload = () => {
      renderList();
      if (location.hash) openDetail(location.hash.replace("#", ""));
    };
  </script>
</head>

<body>

<header>
  <h1>Lean Leaks</h1>
  <nav>
    <a href="#" onclick="goHome()">Home</a>
    <a href="https://discord.gg/HMpFUY9auH" target="_blank" class="discord-btn">Discord</a>
  </nav>
</header>

<main id="list-page">

  <h2 class="section-title">Latest Leaks</h2>

  <!-- FILTER BAR -->
  <div style="display:flex; gap:20px; margin-bottom:30px; flex-wrap:wrap">
    <input
      type="text"
      placeholder="Search scripts..."
      oninput="searchQuery=this.value; renderList()"
      style="padding:12px 16px; border-radius:10px; background:#111; color:#fff; border:1px solid #222"
    />

    <select
      onchange="currentFilter=this.value; renderList()"
      style="padding:12px 16px; border-radius:10px; background:#111; color:#fff; border:1px solid #222"
    >
      <option value="ALL">All</option>
      <option value="GARAGE">Garage</option>
      <option value="MECHANIC">Mechanic</option>
      <option value="HUD">HUD</option>
    </select>
  </div>

  <div class="leak-grid" id="leak-grid"></div>
</main>

<main id="detail-page" class="detail-page" style="display:none"></main>

<footer>
  <p>&copy; 2025 Lean Leaks</p>
</footer>

</body>
</html>
